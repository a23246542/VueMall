(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-155fb264"],{"0640":function(t,e,a){"use strict";var n=a("12f7"),s=a.n(n);s.a},1276:function(t,e,a){"use strict";var n=a("d784"),s=a("44e7"),i=a("825a"),o=a("1d80"),l=a("4840"),r=a("8aa5"),d=a("50c4"),c=a("14c3"),u=a("9263"),p=a("d039"),m=[].push,h=Math.min,v=4294967295,g=!p((function(){return!RegExp(v,"y")}));n("split",2,(function(t,e,a){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var n=String(o(this)),i=void 0===a?v:a>>>0;if(0===i)return[];if(void 0===t)return[n];if(!s(t))return e.call(n,t,i);var l,r,d,c=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,g=new RegExp(t.source,p+"g");while(l=u.call(g,n)){if(r=g.lastIndex,r>h&&(c.push(n.slice(h,l.index)),l.length>1&&l.index<n.length&&m.apply(c,l.slice(1)),d=l[0].length,h=r,c.length>=i))break;g.lastIndex===l.index&&g.lastIndex++}return h===n.length?!d&&g.test("")||c.push(""):c.push(n.slice(h)),c.length>i?c.slice(0,i):c}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var s=o(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,s,a):n.call(String(s),e,a)},function(t,s){var o=a(n,t,this,s,n!==e);if(o.done)return o.value;var u=i(t),p=String(this),m=l(u,RegExp),f=u.unicode,b=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(g?"y":"g"),C=new m(g?u:"^(?:"+u.source+")",b),_=void 0===s?v:s>>>0;if(0===_)return[];if(0===p.length)return null===c(C,p)?[p]:[];var y=0,x=0,w=[];while(x<p.length){C.lastIndex=g?x:0;var k,$=c(C,g?p:p.slice(x));if(null===$||(k=h(d(C.lastIndex+(g?0:x)),p.length))===y)x=r(p,x,f);else{if(w.push(p.slice(y,x)),w.length===_)return w;for(var U=1;U<=$.length-1;U++)if(w.push($[U]),w.length===_)return w;x=y=k}}return w.push(p.slice(y)),w}]}),!g)},"12f7":function(t,e,a){},"3ba8":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",class:{"modal-lg":"update"===t.modalUse,"modal-md":"delete"===t.modalUse||"read"===t.modalUse},attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("span",[t._v(t._s(t.title))])]),t._m(0)]),a("div",{staticClass:"modal-body"},["update"===t.modalUse?[t._t("update")]:t._e(),"delete"===t.modalUse?[t._t("delete")]:t._e(),"read"===t.modalUse?[t._t("read")]:t._e()],2),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s("read"===t.modalUse?"關閉":"取消")+" ")]),"read"!==t.modalUse?a("button",{staticClass:"btn",class:{"btn-primary":"update"===t.modalUse,"btn-danger":"delete"===t.modalUse},attrs:{type:"button"},on:{click:t.sureBtn}},[t._v(" "+t._s("update"===t.modalUse?"確認":"確認刪除")+" ")]):t._e()])])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],i={props:{title:{type:String,required:!0},modalUse:{type:String,required:!0}},methods:{sureBtn:function(){"update"===this.modalUse?this.$emit("submit"):"delete"===this.modalUse&&this.$emit("delete")}}},o=i,l=a("2877"),r=Object(l["a"])(o,n,s,!1,null,null,null);e["a"]=r.exports},a15b:function(t,e,a){"use strict";var n=a("23e7"),s=a("44ad"),i=a("fc6a"),o=a("a640"),l=[].join,r=s!=Object,d=o("join",",");n({target:"Array",proto:!0,forced:r||!d},{join:function(t){return l.call(i(this),void 0===t?",":t)}})},dd87:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{attrs:{"aria-label":"Page navigation"}},[a("ul",{staticClass:"pagination justify-content-center"},[a("li",{staticClass:"page-item",class:{disabled:1===t.pages.current_page}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.emitPage(t.pages.current_page-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pages.total_pages,(function(e,n){return a("li",{key:n,staticClass:"page-item",class:{active:e===t.pages.current_page}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.emitPage(e)}}},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",class:{disabled:t.pages.current_page===t.pages.total_pages}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return e.preventDefault(),t.emitPage(t.pages.current_page+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])},s=[],i={props:{pages:{type:Object,default:function(){}}},data:function(){return{currentPage:"1"}},methods:{emitPage:function(t){this.currentPage=t,this.$emit("change-page",t)}}},o=i,l=a("2877"),r=Object(l["a"])(o,n,s,!1,null,null,null);e["a"]=r.exports},fa1e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-responsive",attrs:{id:"dashCoupon"}},[a("div",[a("div",{staticClass:"mt-4 text-right"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.openModal("new")}}},[t._v(" 新增產品 ")])]),a("table",{staticClass:"table mt-4"},[t._m(0),a("tbody",t._l(t.coupons,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.title))]),a("td",[t._v(t._s(e.code))]),a("td",{staticClass:"text-right"},[t._v(" "+t._s(e.percent)+" ")]),a("td",[e.enabled?a("span",[t._v("啟用")]):a("span",[t._v("未啟用")])]),a("td",{staticClass:"text-right"},[t._v(" "+t._s(e.deadline.datetime.split("").slice(0,10).join(""))+" ")]),a("td",[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{type:"button"},on:{click:function(a){return t.openModal("edit",e)}}},[t._v(" 編輯 ")]),a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return t.openModal("delete",e)}}},[t._v(" 刪除 ")])])])])})),0)])]),a("BasePagination",{staticClass:"BasePagination",attrs:{pages:t.pagination},on:{"change-page":t.getCoupons}}),a("DashModal",{attrs:{id:"couponModal",title:t.modalTitle,"modal-use":t.modalUse},on:{submit:t.updateCoupon,delete:t.removeCoupon},scopedSlots:t._u([{key:"update",fn:function(){return[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("優惠券名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.title,expression:"tempCoupon.title"}],staticClass:"form-control",attrs:{id:"title",type:"text",placeholder:"請輸入優惠券名稱"},domProps:{value:t.tempCoupon.title},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"title",e.target.value)}}})])]),a("div",{staticClass:"col-sm-8"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"code"}},[t._v("優惠碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.code,expression:"tempCoupon.code"}],staticClass:"form-control",attrs:{id:"code",type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.tempCoupon.code},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"code",e.target.value)}}})]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-8"},[a("label",{attrs:{for:"dueDate"}},[t._v("到期日")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.dueDate,expression:"dueDate"}],staticClass:"form-control",attrs:{id:"dueDate",type:"date"},domProps:{value:t.dueDate},on:{input:function(e){e.target.composing||(t.dueDate=e.target.value)}}})]),a("div",{staticClass:"form-group col-md-4"},[a("label",{attrs:{for:"percent"}},[t._v("折扣百分比")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.percent,expression:"tempCoupon.percent"}],staticClass:"form-control",attrs:{id:"percent",type:"text",placeholder:"請輸入折扣率"},domProps:{value:t.tempCoupon.percent},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"percent",e.target.value)}}})])]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.enabled,expression:"tempCoupon.enabled"}],staticClass:"form-check-input",attrs:{id:"is_enabled",type:"checkbox"},domProps:{checked:Array.isArray(t.tempCoupon.enabled)?t._i(t.tempCoupon.enabled,null)>-1:t.tempCoupon.enabled},on:{change:function(e){var a=t.tempCoupon.enabled,n=e.target,s=!!n.checked;if(Array.isArray(a)){var i=null,o=t._i(a,i);n.checked?o<0&&t.$set(t.tempCoupon,"enabled",a.concat([i])):o>-1&&t.$set(t.tempCoupon,"enabled",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.tempCoupon,"enabled",s)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])])])]},proxy:!0},{key:"delete",fn:function(){return[a("p",[t._v(" 是否刪除"),a("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempCoupon.title))]),t._v("優惠券(刪除後將無法恢復)。 ")])]},proxy:!0}])})],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{width:"100"}},[t._v(" 優惠券名稱 ")]),a("th",{attrs:{width:"120"}},[t._v(" 折扣碼 ")]),a("th",{attrs:{width:"120"}},[t._v(" 折扣百分比 ")]),a("th",{attrs:{width:"100"}},[t._v(" 是否開放 ")]),a("th",{attrs:{width:"120"}},[t._v(" 到期日 ")]),a("th",{attrs:{width:"120"}},[t._v(" 編輯 ")])])])}],i=(a("a15b"),a("fb6a"),a("ac1f"),a("1276"),a("96cf"),a("1da1")),o=a("5530"),l=a("dd87"),r=a("3ba8"),d={components:{BasePagination:l["a"],DashModal:r["a"]},data:function(){return{coupons:[],tempCoupon:{title:"",code:"",percent:"",enabled:!0,deadline:{datetime:""}},pagination:{},isNew:!0,modalUse:"",modalTitle:""}},computed:{dueDate:{get:function(){return this.tempCoupon.deadline.datetime.split("").slice(0,10).join("")},set:function(t){this.tempCoupon.deadline.datetime="".concat(t," 23:59:59")}}},created:function(){this.getCoupons()},methods:{openModal:function(t,e){"new"===t?(this.isNew=!0,this.modalUse="update",this.modalTitle="新增優惠券",this.tempCoupon={title:"",code:"",percent:"",enabled:!0,deadline:{datetime:""}}):"edit"===t?(this.isNew=!1,this.modalUse="update",this.modalTitle="編輯優惠券",this.tempCoupon=Object(o["a"])({},e)):"delete"===t&&(this.modalUse="delete",this.modalTitle="刪除優惠券",this.tempCoupon=e),$("#couponModal").modal("show")},getCoupons:function(){var t=arguments,e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:1,s=t.length>1?t[1]:void 0,e.$store.commit("LOADING",!0),i="ec/coupons?page=".concat(n),a.next=6,e.$instanceAdmin.get(i).then((function(t){e.coupons=t.data.data,e.pagination=t.data.meta.pagination,s&&s(),e.$store.commit("LOADING",!1)}));case 6:case"end":return a.stop()}}),a)})))()},updateCoupon:function(){this.$store.commit("LOADING",!0);var t=this,e="ec/coupon",a="post";this.isNew||(e="ec/coupon/".concat(this.tempCoupon.id),a="patch");var n=Object(o["a"])({},this.tempCoupon);n.deadline_at=n.deadline.datetime,delete n.deadline,this.$instanceAdmin[a](e,n).then((function(){t.getCoupons().then((function(){$("#couponModal").modal("hide")}))}))},removeCoupon:function(){var t=this;this.$store.commit("LOADING",!0);var e="ec/coupon/".concat(this.tempCoupon.id);this.$instanceAdmin.delete(e).then((function(){t.getCoupons(1,(function(){$("#couponModal").modal("hide")}))}))}}},c=d,u=(a("0640"),a("2877")),p=Object(u["a"])(c,n,s,!1,null,null,null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-155fb264.03faf1cd.js.map