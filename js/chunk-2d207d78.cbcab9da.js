(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d207d78"],{a1f8:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"orderInfo"},[a("div",{staticClass:"container mb-5"},[a("div",{staticClass:"row"},[a("div",{staticClass:"orderInfo__content col-lg-8"},[a("CustomerForm",{on:{emitForm:t.createOrder}})],1),a("div",{staticClass:"orderInfo__aside col-lg-4 d-none d-lg-block"},[a("div",{staticClass:"cartSummary card mb-45"},[a("div",{staticClass:"cartSummary__header card-header"},[t._v(" 購物清單 ")]),a("div",{staticClass:"card-body"},t._l(t.carts,(function(e,s){return a("tr",{key:e.product.id,staticClass:"d-flex",class:{"mb-2":s!==t.carts.length-1}},[a("td",{staticClass:"flex-1 d-flex align-items-center"},[a("div",{staticClass:"bg-cover w-100",style:{backgroundImage:"url("+e.product.imageUrl[0]+")",minWidth:"80px",height:"80px"}})]),a("td",{staticClass:"flex-2 p-2 pl-3"},[a("div",[t._v(" "+t._s(e.product.title)+" ")]),a("small",[t._v(" "+t._s(e.quantity)+" "+t._s(e.product.unit)+" ")]),a("div",[t._v(" "+t._s(t._f("dollars")(e.quantity*e.product.price))+" ")])])])})),0)]),a("div",{staticClass:"cartSummary card"},[a("div",{staticClass:"cartSummary__header card-header"},[t._v(" 訂單摘要 ")]),a("div",{staticClass:"cartSummary__body card-body"},[a("div",{staticClass:"d-flex justify-content-between mb-2"},[a("span",[t._v("小計")]),a("span",[t._v("NT"+t._s(t._f("dollars")(t.cartTotal)))])]),t.discountAmount?a("div",{staticClass:"d-flex justify-content-between mb-3 text-red"},[a("span",[t._v("折扣金額")]),a("span",[t._v("-NT"+t._s(t._f("dollars")(t.discountAmount)))])]):t._e(),a("div",{staticClass:"d-flex justify-content-between mb-3"},[a("span",[t._v("運費")]),a("span",[t._v("NT"+t._s(t._f("dollars")(0)))])]),a("div",{staticClass:"d-flex justify-content-between mb-3",staticStyle:{"font-size":"18px"}},[a("span",[t._v("總計")]),a("span",[t._v("NT"+t._s(t._f("dollars")(t.amountAll)))])])])])])]),a("button",{staticClass:"btn btn-secondary1-light mt-5",attrs:{type:"button"},on:{click:function(e){return t.$router.go(-1)}}},[t._v(" 上一頁 ")])])])},r=[],o=a("5530"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ValidationObserver",{staticClass:"customerForm",attrs:{tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.invalid,r=e.handleSubmit;return[a("div",{staticClass:"shoppingBlock__header"},[a("h4",{staticClass:"mb-0"},[t._v(" 訂購資料 ")])]),a("form",{staticClass:"shoppingBlock__body",on:{submit:function(e){return e.preventDefault(),r(t.createOrder)}}},[a("div",{staticClass:"form-group"},[a("ValidationProvider",{attrs:{rules:"required",name:"收件人"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes,o=e.passed;return[a("label",{staticClass:"customerForm__label",attrs:{for:"name"}},[t._v(" 收件人姓名 ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"customerForm__input form-control",class:r,attrs:{id:"name",type:"text",placeholder:"輸入姓名"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}}),s[0]?a("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))]):t._e(),o?a("span",{staticClass:"valid-feedback"},[t._v("已填")]):t._e()]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes,o=e.passed;return[a("label",{staticClass:"customerForm__label",attrs:{for:"email"}},[t._v(" Email ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"customerForm__input form-control",class:r,attrs:{id:"email",type:"email",placeholder:"請輸入 Email"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),s[0]?a("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))]):t._e(),o?a("span",{staticClass:"invalid-feedback"},[t._v("已填")]):t._e()]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("ValidationProvider",{attrs:{rules:"required|min:8",name:"收件人電話"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes,o=e.passed;return[a("label",{staticClass:"customerForm__label",attrs:{for:"usertel"}},[t._v(" 收件人電話 ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.tel,expression:"form.tel"}],staticClass:"customerForm__input form-control",class:r,attrs:{id:"usertel",type:"tel",placeholder:"請輸入電話"},domProps:{value:t.form.tel},on:{input:function(e){e.target.composing||t.$set(t.form,"tel",e.target.value)}}}),s[0]?a("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))]):t._e(),o?a("span",{staticClass:"invalid-feedback"},[t._v("已填")]):t._e()]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("ValidationProvider",{attrs:{rules:"required",name:"收件人地址"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors,r=e.classes,o=e.passed;return[a("label",{staticClass:"customerForm__label",attrs:{for:"useraddress"}},[t._v(" 收件人地址 ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.address,expression:"form.address"}],staticClass:"customerForm__input form-control",class:r,attrs:{id:"useraddress",type:"text",placeholder:"請輸入地址"},domProps:{value:t.form.address},on:{input:function(e){e.target.composing||t.$set(t.form,"address",e.target.value)}}}),s[0]?a("span",{staticClass:"invalid-feedback"},[t._v(t._s(s[0]))]):t._e(),o?a("span",{staticClass:"invalid-feedback"},[t._v("已填")]):t._e()]}}],null,!0)})],1),a("div",{staticClass:"form-group"},[a("label",{staticClass:"customerForm__label",attrs:{for:"message"}},[t._v(" 購買方式 ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.payment,expression:"form.payment"}],staticClass:"customerForm__input  form-control",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"payment",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",disabled:""}},[t._v(" 請選擇付款方式 ")]),a("option",{attrs:{value:"WebATM"}},[t._v(" WebATM ")]),a("option",{attrs:{value:"ATM"}},[t._v(" ATM ")]),a("option",{attrs:{value:"CVS"}},[t._v(" CVS ")]),a("option",{attrs:{value:"Barcode"}},[t._v(" Barcode ")]),a("option",{attrs:{value:"Credit"}},[t._v(" Credit ")]),a("option",{attrs:{value:"ApplePay"}},[t._v(" ApplePay ")]),a("option",{attrs:{value:"GooglePay"}},[t._v(" GooglePay ")])])]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"customerForm__label",attrs:{for:"message"}},[t._v(" 留言 ")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{id:"message",cols:"30",rows:"3"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-block btn-lg py-1 btn-danger bg-primary",attrs:{type:"submit",disabled:s},on:{click:function(e){return e.preventDefault(),t.submit(e)}}},[t._v(" 送出訂單 ")])])])]}}])})},l=[],n={components:{},data:function(){return{form:{name:"",email:"",tel:"",address:"",payment:"",message:""}}},methods:{submit:function(){this.$emit("emitForm",this.form)}}},c=n,d=a("2877"),u=Object(d["a"])(c,i,l,!1,null,null,null),m=u.exports,v=a("2f62"),p={components:{CustomerForm:m},data:function(){return{form:{}}},computed:Object(o["a"])(Object(o["a"])({},Object(v["c"])({carts:function(t){return t.Cart.cart.carts},pagination:function(t){return t.Cart.cart.pagination},coupon:function(t){return t.CusOrders.coupon}})),Object(v["b"])(["cartTotal","discountAmount","amountAll"])),watch:{cartTotal:function(){this.$store.dispatch("setOrderCartTotal")}},created:function(){this.$store.dispatch("getCart"),this.$store.dispatch("changePage","order_info")},methods:{createOrder:function(t){var e=this;this.$store.commit("LOADING",!1),this.form=t,this.coupon.code&&this.$set(this.form,"coupon",this.coupon.code);var a="ec/orders",s=this;this.$instanceCus.post(a,this.form).then((function(t){e.$store.commit("LOADING",!1);var a=t.data.data.id;s.$router.push({name:"最後確認",query:{orderId:a}})})).catch((function(){}))}}},f=p,_=Object(d["a"])(f,s,r,!1,null,null,null);e["default"]=_.exports}}]);
//# sourceMappingURL=chunk-2d207d78.cbcab9da.js.map