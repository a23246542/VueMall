(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f2949b1e"],{"306b":function(t,a,e){},"408b":function(t,a,e){},4319:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"products"}},[e("div",{staticClass:"container pt-5"},[e("Alert"),e("div",{staticClass:"row"},[t._m(0),e("div",{staticClass:"col-10"},[e("div",{staticClass:"row"},t._l(t.products,(function(a){return e("div",{key:a.id,staticClass:"col-4 mb-5"},[e("div",{staticClass:"card"},[e("img",{staticClass:"card-img-top",attrs:{src:a.imageUrl[0],alt:"..."}}),e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title font-weight-bold"},[t._v(" "+t._s(a.title)+" "),e("span",{staticClass:"badge badgeColor"},[t._v(t._s(a.category))])]),e("p",{staticClass:"card-text text-truncate lineCamp--4 text-wrap"},[t._v(" "+t._s(a.content)+" ")]),e("div",{staticClass:"d-flex"},[e("div",{staticClass:"form-inline"},[e("select",{directives:[{name:"model",rawName:"v-model",value:a.num,expression:"item.num"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(a,"num",e.target.multiple?s:s[0])}}},[e("option",{attrs:{selected:""},domProps:{value:1}},[t._v("1")]),t._l(5,(function(a){return e("option",{key:"num"+a,domProps:{value:a+1}},[t._v(t._s(a+1))])}))],2)]),e("div",{staticClass:"h3 ml-2"},[t._v(" "+t._s(a.price)+" ")]),e("a",{staticClass:"btn bg-green ml-auto",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.addToCart(a,a.num)}}},[t._v("加入購物車")])])])])])})),0),e("pagination",{attrs:{pages:t.pagination},on:{"change-page":t.getProducts}})],1)])],1)])},n=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-2"},[e("div",{staticClass:"display-4"},[t._v(" category-list ")])])}],i=(e("99af"),e("4160"),e("159b"),e("9f30")),r=e("f67e"),c=e("dd87"),o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"message-alert",attrs:{id:"message-alert"}},[e("transition-group",{attrs:{name:"list",tag:"p"}},t._l(t.messages,(function(a,s){return e("div",{key:s+a.messages,staticClass:"alert alert-dismissible",class:"alert-"+a.status},[t._v(" "+t._s(a.message)+" "),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(a){return t.removeMessage(s)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])})),0)],1)},l=[],u=(e("a434"),{props:{},data:function(){return{messages:[]}},created:function(){var t=this;this.$bus.$on("message:push",(function(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";t.updateMessage(a,e)}))},methods:{updateMessage:function(t,a){var e=Math.floor(new Date/1e3);this.messages.push({message:t,status:a,id:e}),this.removeMessageTiming(e)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageTiming:function(t){var a=this;setTimeout((function(){a.messages.forEach((function(e,s){e.id===t&&a.messages.splice(s,1)}))}),5e3)}}}),d=u,p=(e("fdeb"),e("2877")),g=Object(p["a"])(d,o,l,!1,null,null,null),f=g.exports,m={components:{CartModal:r["a"],Alert:f,pagination:c["a"]},data:function(){return{products:[],pagination:{}}},computed:{},created:function(){this.getProducts()},methods:{getProducts:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"created_at",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"desc";this.$store.commit("LOADING",!0);var r="ec/products?page=".concat(a,"&paged=").concat(e,"&orderBy=").concat(s,"&sort=").concat(n);i["b"].get(r).then((function(a){t.products=a.data.data,t.pagination=a.data.meta.pagination,t.products.forEach((function(a){t.$set(a,"num",1)})),t.$store.commit("LOADING",!1)}))},addToCart:function(t){var a=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$store.commit("LOADING",!0);var s="ec/shopping",n={product:t.id,quantity:e};this.$instanceCus.post(s,n).then((function(e){a.$store.commit("LOADING",!1),a.$bus.$emit("message:push","".concat(t.title,"已加入購物車"),"success"),a.$store.dispatch("getCart")})).catch((function(e){a.$store.commit("LOADING",!1),console.dir(e.response.data),"該商品已放入購物車當中。"===e.response.data.errors[0]&&a.$bus.$emit("message:push","".concat(t.title,"已存在購物車"))}))},openSingleProduct:function(t){this.$router.push("/products/".concat(t))}}},v=m,h=(e("bce6"),Object(p["a"])(v,s,n,!1,null,null,null));a["default"]=h.exports},"70c1":function(t,a,e){"use strict";var s=e("408b"),n=e.n(s);n.a},"71a1":function(t,a,e){},a434:function(t,a,e){"use strict";var s=e("23e7"),n=e("23cb"),i=e("a691"),r=e("50c4"),c=e("7b0b"),o=e("65f0"),l=e("8418"),u=e("1dde"),d=e("ae40"),p=u("splice"),g=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,m=Math.min,v=9007199254740991,h="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!p||!g},{splice:function(t,a){var e,s,u,d,p,g,C=c(this),_=r(C.length),b=n(t,_),$=arguments.length;if(0===$?e=s=0:1===$?(e=0,s=_-b):(e=$-2,s=m(f(i(a),0),_-b)),_+e-s>v)throw TypeError(h);for(u=o(C,s),d=0;d<s;d++)p=b+d,p in C&&l(u,d,C[p]);if(u.length=s,e<s){for(d=b;d<_-s;d++)p=d+s,g=d+e,p in C?C[g]=C[p]:delete C[g];for(d=_;d>_-s+e;d--)delete C[d-1]}else if(e>s)for(d=_-s;d>b;d--)p=d+s-1,g=d+e-1,p in C?C[g]=C[p]:delete C[g];for(d=0;d<e;d++)C[d+b]=arguments[d+2];return C.length=_-s+e,u}})},bce6:function(t,a,e){"use strict";var s=e("71a1"),n=e.n(s);n.a},dd87:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("nav",{attrs:{"aria-label":"Page navigation"}},[e("ul",{staticClass:"pagination justify-content-center"},[e("li",{staticClass:"page-item",class:{disabled:1===t.pages.current_page}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.emitPage(t.pages.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pages.total_pages,(function(a,s){return e("li",{key:s,staticClass:"page-item",class:{active:a===t.pages.current_page}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.emitPage(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item",class:{disabled:t.pages.current_page===t.pages.total_pages}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.emitPage(t.pages.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])},n=[],i={props:{pages:{type:Object,default:"1"}},data:function(){return{}},methods:{emitPage:function(t){this.$emit("change-page",t)}}},r=i,c=e("2877"),o=Object(c["a"])(r,s,n,!1,null,null,null);a["a"]=o.exports},f67e:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"dropdown"},[t._m(0),e("div",{staticClass:"dropdown-menu",staticStyle:{"min-width":"300px"},attrs:{"aria-labelledby":"dropdownMenuButton"}},[e("div",{staticClass:"px-4 py-3"},[e("table",{staticClass:"table table-sm mb-0"},[t._m(1),e("tbody",[t.carts.length>0?e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"4"}},[e("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:t.delAllCart}},[t._v("刪除全部品項")])])]):t._e(),t._l(t.carts,(function(a){return e("tr",{key:a.product.id},[e("td",{staticClass:"align-middle text-center"},[e("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.delCart(a)}}},[e("i",{staticClass:"fa fa-trash",attrs:{"aria-hidden":"true"}})])]),e("td",{staticClass:"align-middle"},[t._v(" "+t._s(a.product.title)+" ")]),e("td",{staticClass:"align-middle text-right"},[t._v("x"+t._s(a.quantity))]),e("td",{staticClass:"align-middle text-center"},[t._v(" "+t._s(t._f("dollars")(a.quantity*a.product.price))+" ")])])}))],2),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),e("td",{staticClass:"text-center"},[t._v(t._s(t._f("dollars")(t.cartTotal)))])]),e("tr",[e("td",{attrs:{colspan:"4"}},[e("router-link",{staticClass:"btn btn-block btn-success btn-sm",attrs:{to:{name:"購物車"},tag:"a"}},[t._v(" 結帳去 ")])],1)])])])])])])])},n=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"btn dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[e("i",{staticClass:"fas fa-shopping-cart"}),e("span",{staticClass:"badge badge-pill badge-danger"},[t._v("3")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("th",{staticClass:"h6 text-center",attrs:{colspan:"4"}},[t._v("已選購商品")])])}],i={data:function(){return{}},computed:{carts:function(){return this.$store.state.Cart.cart.carts},cartPagination:function(){return this.$store.state.Cart.cart.pagination},cartTotal:function(){return this.$store.getters.cartTotal}},created:function(){this.getCart()},methods:{getCart:function(){this.$store.dispatch("getCart")},editCart:function(t,a){this.$store.dispatch("editCart",{id:t,qty:a})},delCart:function(t){var a=t.product.id;this.$store.dispatch("delCart",a)},delAllCart:function(){this.$store.dispatch("delAllCart")}}},r=i,c=(e("70c1"),e("2877")),o=Object(c["a"])(r,s,n,!1,null,"5cbb86f2",null);a["a"]=o.exports},fdeb:function(t,a,e){"use strict";var s=e("306b"),n=e.n(s);n.a}}]);
//# sourceMappingURL=chunk-f2949b1e.121d42fe.js.map