(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5034f601"],{1076:function(t,a,e){},"3ba8":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal fade",attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",class:{"modal-lg":"update"===t.modalUse,"modal-md":"delete"===t.modalUse||"read"===t.modalUse},attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[e("div",{staticClass:"modal-header bg-dark text-white"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e("span",[t._v(t._s(t.title))])]),t._m(0)]),e("div",{staticClass:"modal-body"},["update"===t.modalUse?[t._t("update")]:t._e(),"delete"===t.modalUse?[t._t("delete")]:t._e(),"read"===t.modalUse?[t._t("read")]:t._e()],2),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" "+t._s("read"===t.modalUse?"關閉":"取消")+" ")]),"read"!==t.modalUse?e("button",{staticClass:"btn",class:{"btn-primary":"update"===t.modalUse,"btn-danger":"delete"===t.modalUse},attrs:{type:"button"},on:{click:t.sureBtn}},[t._v(" "+t._s("update"===t.modalUse?"確認":"確認刪除")+" ")]):t._e()])])])])},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],n={props:{title:{type:String,required:!0},modalUse:{type:String,required:!0}},methods:{sureBtn:function(){"update"===this.modalUse?this.$emit("submit"):"delete"===this.modalUse&&this.$emit("delete")}}},o=n,l=e("2877"),r=Object(l["a"])(o,s,i,!1,null,null,null);a["a"]=r.exports},"6a41":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dashStorage pt-4",attrs:{id:"dashStorage"}},[e("div",{staticClass:"form-inline justify-content-end mb-4"},[e("div",{staticClass:"custom-file"},[e("input",{ref:"storage",staticClass:"custom-file-input",attrs:{id:"customFile",type:"file"},on:{change:t.postStorage}}),e("label",{staticClass:"custom-file-label",attrs:{for:"customFile"}},[t._v("選擇圖片檔案")])])]),e("div",{staticClass:"row"},t._l(t.storages,(function(a,s){return e("div",{key:a.id,staticClass:"col-md-6 col-lg-4 mb-4"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("img",{staticClass:"img-fluid",attrs:{src:a.path}})]),e("div",{staticClass:"card-footer text-right"},[e("button",{staticClass:"btn btn-outline-info btn-sm mr-3",attrs:{type:"button"},on:{click:function(e){return t.openModal("read",a,s)}}},[t._v(" 查看 ")]),e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(e){return t.openModal("delete",a,s)}}},[t._v(" 刪除 ")])])])])})),0),e("pagination",{attrs:{pages:t.pagination},on:{"change-page":t.getStorages}}),e("DashModal",{ref:"dashStorageModal",attrs:{id:"dashStorageModal",title:t.title,"modal-use":t.modalUse},on:{delete:t.destoryStorage},scopedSlots:t._u([{key:"delete",fn:function(){return[e("div",{staticClass:"p-3"},[t._v(" 確定要刪除圖片嗎? ")])]},proxy:!0},{key:"read",fn:function(){return[e("div",{staticClass:"p-3"},[e("p",{staticClass:"mb-1"},[t._v(" 圖片編號: ")]),e("p",{staticClass:"pl-3"},[t._v(" "+t._s(t.checkedItem.id)+" ")]),e("p",{staticClass:"mb-1"},[t._v(" 圖片地址: ")]),e("p",{staticClass:"pl-3"},[t._v(" "+t._s(t.checkedItem.path)+" ")])])]},proxy:!0}])})],1)},i=[],n=(e("99af"),e("a434"),e("5530")),o=e("dd87"),l=e("3ba8"),r={components:{pagination:o["a"],DashModal:l["a"]},data:function(){return{storages:[],pagination:{},title:"",modalUse:"",checkedItem:{},checkedindex:0}},created:function(){this.getStorages()},methods:{openModal:function(t,a,e){this.modalUse=t,"read"===t?this.title="檢視檔案":"delete"===t&&(this.title="刪除檔案"),this.checkedItem=Object(n["a"])({},a),this.checkedindex=e,$("#dashStorageModal").modal("show")},getStorages:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"created_at",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"desc";this.$store.commit("LOADING",!0);var n="storage?page=".concat(a,"&paged=").concat(e,"&orderBy=").concat(s,"&sort=").concat(i);this.$instanceAdmin.get(n).then((function(a){t.storages=a.data.data,t.pagination=a.data.meta.pagination,t.$store.commit("LOADING",!1)}))},postStorage:function(){var t=this;this.$store.commit("LOADING",!0);var a="storage",e=this.$refs.storage.files[0],s=new FormData;s.append("file",e),this.$instanceAdmin.post(a,s,{headers:{"content-type":"multipart/form-data"}}).then((function(a){t.storages.unshift(a.data.data),t.$store.commit("LOADING",!1)}))},destoryStorage:function(){var t=this,a=this.checkedItem,e=this.checkedindex;this.$store.commit("LOADING",!0);var s="storage/".concat(a.id);this.$instanceAdmin.delete(s).then((function(){t.storages.splice(e,1),$("#dashStorageModal").modal("hide"),t.$store.commit("LOADING",!1)}))}}},d=r,c=(e("c1b9"),e("2877")),u=Object(c["a"])(d,s,i,!1,null,null,null);a["default"]=u.exports},c1b9:function(t,a,e){"use strict";var s=e("1076"),i=e.n(s);i.a},dd87:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("nav",{attrs:{"aria-label":"Page navigation"}},[e("ul",{staticClass:"pagination justify-content-center"},[e("li",{staticClass:"page-item",class:{disabled:1===t.pages.current_page}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.emitPage(t.pages.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pages.total_pages,(function(a,s){return e("li",{key:s,staticClass:"page-item",class:{active:a===t.pages.current_page}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.emitPage(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item",class:{disabled:t.pages.current_page===t.pages.total_pages}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.emitPage(t.pages.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])},i=[],n={props:{pages:{type:Object,default:function(){}}},data:function(){return{currentPage:"1"}},methods:{emitPage:function(t){this.currentPage=t,this.$emit("change-page",t)}}},o=n,l=e("2877"),r=Object(l["a"])(o,s,i,!1,null,null,null);a["a"]=r.exports}}]);
//# sourceMappingURL=chunk-5034f601.977b5575.js.map